(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/map/map"],{"16f2":function(t,e,n){},"66c0":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i})},"86e1":function(t,e,n){"use strict";var o=n("16f2"),i=n.n(o);i.a},"8e30":function(t,e,n){"use strict";n.r(e);var o=n("66c0"),i=n("d86f");for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);n("86e1");var d=n("2877"),l=Object(d["a"])(i["default"],o["a"],o["b"],!1,null,"3daed8a9",null);e["default"]=l.exports},acb2:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o="https://apis.map.qq.com",i="6ZCBZ-5ZIKF-VAWJ4-NKQI2-6PN6J-UXF4O",a="https://llyapi.laiyunyou.cn/NKOrderManage/NK_Station/GetNKInfo",d=n("c8a6"),l={data:function(){return{city:"定位中",longitude:102.662140131,latitude:25.0585733749,markers:[],polyline:[],inpoints:[],List:[]}},methods:{loadcity:function(){var e=this;t.getLocation({success:function(n){console.log(n);var a=n.longitude,d=n.latitude;t.request({url:o+"/ws/geocoder/v1/?location="+d+","+a+"&get_poi=0&key="+i,data:{},header:{"Content-Type":"application/json"},success:function(t){console.log(t),e.city=t.data.result.address_component.city},fail:function(){page.setData({currentCity:"获取定位失败"})}})},fail:function(t){console.log("未获得地理位置信息"),console.log(t)}})},drawLine:function(){t.showLoading({title:"加载中"});var e=this;t.request({url:a,data:{beginStationId:820,endStationId:152},header:{"Content-Type":"application/json"},success:function(n){t.hideLoading(),console.log(n);for(var o=[],i=n.data.resultdata.NK_RouteInfo.DrawingPoint,a=i.split(";"),d=0;d<a.length;d++){var l=a[d],u=l.split(","),c={longitude:u[0],latitude:u[1]};o.push(c)}console.log(o);var r=[{points:o,color:"#2894f8",width:4}],s=t.createMapContext("myMap");s.includePoints({padding:[80,0,200,0],points:[{longitude:o[0].longitude,latitude:o[0].latitude},{longitude:o[o.length-1].longitude,latitude:o[o.length-1].latitude}]}),e.List=n.data.resultdata.NKCarList,e.polyline=r,e.inpoints=[{longitude:o[0].longitude,latitude:o[0].latitude},{longitude:o[o.length-1].longitude,latitude:o[o.length-1].latitude}],e.markers=[{iconPath:"/static/images/map_start.png",id:0,latitude:o[0].latitude,longitude:o[0].longitude,width:12,height:12,callout:{content:n.data.resultdata.NK_RouteInfo.BeginStationName,bgColor:"#ffffff",borderColor:"#cccccc",borderWidth:1,textAlign:"center",padding:3,borderRadius:1,display:"ALWAYS"}},{iconPath:"/static/images/map_end.png",id:1,latitude:o[o.length-1].latitude,longitude:o[o.length-1].longitude,width:12,height:12,callout:{content:n.data.resultdata.NK_RouteInfo.EndStationName,bgColor:"#ffffff",borderColor:"#cccccc",borderWidth:1,textAlign:"center",padding:3,borderRadius:1,display:"ALWAYS"}}]},fail:function(){page.setData({currentCity:"获取定位失败"})}})},line:function(){t.createMapContext("myMap").includePoints({padding:[80,0,200,0],points:this.inpoints})},moveToLocation:function(){t.createMapContext("myMap").moveToLocation()},sweepCode:function(t){d.sweepCode()}},onLoad:function(){this.loadcity(),this.drawLine()}};e.default=l}).call(this,n("543d")["default"])},d86f:function(t,e,n){"use strict";n.r(e);var o=n("acb2"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e["default"]=i.a}},[["7e91","common/runtime","common/vendor"]]]);